(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[10],{280:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(0);var r=n(71),c=n(72),i=n(43),s=(n(281),n(5)),l=function(e){var t=e.children;return Object(s.jsxs)("div",{children:[Object(s.jsx)("nav",{children:Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{children:Object(s.jsx)(i.b,{to:"/groups","aria-label":"groups",children:Object(s.jsx)(r.a,{icon:c.c})})}),Object(s.jsx)("li",{children:Object(s.jsx)(i.b,{to:"/calendar","aria-label":"calendar",children:Object(s.jsx)(r.a,{icon:c.a})})}),Object(s.jsx)("li",{children:Object(s.jsx)(i.b,{to:"/files","aria-label":"files",children:Object(s.jsx)(r.a,{icon:c.d})})}),Object(s.jsx)("li",{children:Object(s.jsx)(i.b,{to:"/account","aria-label":"account",children:Object(s.jsx)(r.a,{icon:c.b})})})]})}),Object(s.jsx)("main",{children:t})]})}},281:function(e,t,n){},289:function(e,t,n){},316:function(e,t,n){},317:function(e,t,n){},391:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(295),i=n(280),s=n(358),l=n(359),a=n(14),o=n(17),u=n(21),d=n(73),j=n(274),b=n(266),O=n(381),p=n(267),v=n(264),x=n(55),h=n(47),f=n(393),m=n(275),g=n(5),y=function(e){var t=e.list,n=e.name,r=e.optionTitle,c=e.label,i=e.errors,s=e.validatorRef,l=e.control,a=e.setValue;return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(d.a,{name:n,control:l,render:function(e){return Object(g.jsx)(f.a,{multiple:!0,options:t,defaultValue:e.value,getOptionSelected:function(e,t){return e._id===t._id},getOptionLabel:function(e){return e[r]},onChange:function(e,t){var r=t.map((function(e){return!e.id&&e._id&&(e.id=e._id),!e._id&&e.id&&(e._id=e.id),e}));a(n,r)},filterSelectedOptions:!0,fullWidth:!0,value:e.value,renderInput:function(e){var t;return Object(g.jsx)(m.a,Object(h.a)(Object(h.a)({},e),{},{variant:"outlined",label:c,inputRef:s,error:!!i[n],helperText:null===(t=i[n])||void 0===t?void 0:t.message}))}})}})})},E=n(52),C=n(361),S=function(e){var t=e.optionTitle,n=e.errors,r=e.list,c=e.label,i=e.name,s=e.rules,l=e.optionValue,a=e.control,o=e.setValue;return Object(g.jsx)(d.a,{name:i,control:a,rules:s,render:function(e){var s;return Object(g.jsxs)(m.a,{label:c,select:!0,variant:"outlined",fullWidth:!0,defaultValue:e.value,value:e.value,error:!!n[i],helperText:null===(s=n[i])||void 0===s?void 0:s.message,onChange:function(e){return o(i,e.target.value)},children:[Object(g.jsx)(C.a,{value:"",children:"Empty"},"empty"),r.map((function(e){return Object(g.jsx)(C.a,{value:e[l],children:e[t]},e[l])}))]})}})},k=function(e){var t,n=e.name,r=e.label,c=e.rules,i=e.autoComplete,s=e.errors,l=e.type,a=e.inputLabelProps,o=e.control;return Object(g.jsx)(d.a,{name:n,control:o,rules:c,as:Object(g.jsx)(m.a,{label:r,type:l,variant:"outlined",autoComplete:i,fullWidth:!0,error:!!s[n],helperText:null===(t=s[n])||void 0===t?void 0:t.message,InputLabelProps:a})})},T=(n(289),n(292)),D=Object(r.createContext)(),_=function(e){var t=e.children,n=Object(r.useState)([]),c=Object(o.a)(n,2),i=c[0],s=c[1],l=Object(r.useState)(!1),a=Object(o.a)(l,2),u=a[0],d=a[1],j=Object(r.useState)(!1),b=Object(o.a)(j,2),O=b[0],p=b[1],v=Object(r.useState)(!1),x=Object(o.a)(v,2),h=x[0],f=x[1],m=Object(r.useState)([]),y=Object(o.a)(m,2),C=y[0],S=y[1],k=Object(r.useState)([]),_=Object(o.a)(k,2),w=_[0],V=_[1],q=Object(r.useState)(null),M=Object(o.a)(q,2),I=M[0],L=M[1];Object(T.a)("/event/list",E.d,{onSuccess:function(e){return s(e)},refreshInterval:1e4});return Object(r.useEffect)((function(){return Object(E.c)("/users","GET",S),Object(E.c)("/group/getList","GET",V),function(){S([]),V([])}}),[,]),Object(g.jsx)(D.Provider,{value:{events:i,setEvents:s,editOpen:u,setEditOpen:d,createOpen:O,setCreateOpen:p,detailsOpen:h,setDetailsOpen:f,usersList:C,groups:w,selectedEvent:I,setSelectedEvent:L},children:t})},w=n(287),V={title:"",start:Object(w.a)(Date.now(),"yyyy-MM-dd'T'k:mm"),end:"",description:"",groupId:"",users:[]},q=function(){var e=Object(r.useContext)(D),t=e.setEvents,n=e.createOpen,c=e.setCreateOpen,i=e.groups,s=e.usersList,l=(Object(r.useContext)(u.a).url,Object(r.useState)(!1)),h=Object(o.a)(l,2),f=h[0],m=h[1],C=Object(d.b)({defaultValues:V}),T=C.handleSubmit,_=C.errors,w=C.register,q=C.control,M=C.setValue,I=function(e){t((function(t){return[].concat(Object(a.a)(t),[e])})),c(!1),x.b.success("Success")};return Object(g.jsxs)(j.a,{open:n,onClose:function(){c(!1)},fullWidth:!0,children:[Object(g.jsx)(b.a,{id:"form-dialog-title",children:"Create Event"}),Object(g.jsx)(O.a,{children:Object(g.jsxs)("form",{onSubmit:T((function(e){var t=e.title,n=e.description,r=e.start,c=e.end,i=e.groupId,s=e.users;m(!0),Object(E.c)("/event/create","POST",I,{title:t,description:n,start:new Date(r).toISOString(),end:c?new Date(c).toISOString():null,group:i||null,users:s?s.map((function(e){return e.id})):[]}),m(!1)})),children:[Object(g.jsx)(k,{name:"title",control:q,type:"text",label:"Title",errors:_,rules:{required:"Required",minLength:{value:5,message:"Min length is 5"}}}),Object(g.jsx)(k,{name:"description",control:q,type:"text",label:"Description",errors:_,rules:{required:!1}}),Object(g.jsx)(k,{name:"start",control:q,type:"datetime-local",label:"*Begin date",errors:_,rules:{required:"Required"}}),Object(g.jsx)(k,{name:"end",control:q,type:"datetime-local",label:"End date",errors:_,rules:{required:!1},inputLabelProps:{shrink:!0}}),Object(g.jsx)(S,{list:i,optionTitle:"name",label:"select group",errors:_,rules:{required:!1},name:"groupId",optionValue:"_id",control:q,setValue:M}),Object(g.jsx)(y,{list:s,optionTitle:"username",label:"select users",placeholder:"select users",errors:_,name:"users",validatorRef:w({required:!1}),control:q,setValue:M}),Object(g.jsxs)(p.a,{children:[Object(g.jsx)(v.a,{onClick:function(){return c(!1)},color:"primary",children:"Close"}),Object(g.jsxs)(v.a,{type:"submit",color:"primary",children:["Create ",f?"...":null]})]})]})})]})},M=n(8),I=n.n(M),L=n(16),G=(n(316),n(290)),W=n.n(G),P=function(e){var t,n,r,c,i=e.event;return Object(g.jsxs)("div",{className:"event-container",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"Title"}),i.title&&Object(g.jsx)("span",{children:i.title})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"Description"}),i.description&&Object(g.jsx)("span",{children:null===i||void 0===i?void 0:i.description})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"Begin"}),i.start&&Object(g.jsx)("span",{children:Object(w.a)(new Date(i.start),"kk:mm dd.MM.uu")})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"End"}),i.end&&Object(g.jsx)("span",{children:Object(w.a)(new Date(i.end),"kk:mm dd.MM.uu")})]}),Object(g.jsxs)("div",{className:"group",children:[Object(g.jsx)("span",{children:"Group Video Call"}),i.group&&Object(g.jsx)("span",{children:null===(t=i.group)||void 0===t?void 0:t.name}),(null===(n=i.group)||void 0===n?void 0:n._id)&&Object(g.jsx)("a",{target:"_blank",rel:"noreferrer",href:"/videoCall/".concat(i.group._id),children:Object(g.jsx)(W.a,{})})]}),Object(g.jsxs)("div",{className:"users",children:[Object(g.jsx)("span",{children:"Users"}),Object(g.jsx)("div",{children:i.users&&(null===(r=i.users)||void 0===r?void 0:r.map((function(e){return Object(g.jsx)("span",{children:null===e||void 0===e?void 0:e.username},null===e||void 0===e?void 0:e._id)})))})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"Creator"}),i.creator&&Object(g.jsx)("span",{children:null===(c=i.creator)||void 0===c?void 0:c.username})]})]})},R=function(){var e,t=Object(r.useContext)(D),n=t.setEvents,c=t.setEditOpen,i=t.selectedEvent,s=t.setSelectedEvent,l=t.detailsOpen,a=t.setDetailsOpen,d=Object(r.useContext)(u.a).user,h=Object(r.useState)(null),f=Object(o.a)(h,2),m=f[0],y=f[1],C=Object(r.useState)(!1),S=Object(o.a)(C,2),k=S[0],T=S[1];Object(r.useEffect)((function(){i&&_(i)}),[i,l]);var _=function(){var e=Object(L.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(E.c)("/event/get/".concat(t),"GET",y));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(L.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===m||void 0===m?void 0:m._id)&&(null===d||void 0===d?void 0:d.id)===(null===m||void 0===m||null===(t=m.creator)||void 0===t?void 0:t._id)){e.next=2;break}return e.abrupt("return");case 2:Object(E.c)("/event/delete/".concat(m._id),"DELETE",V);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){n((function(e){return e.filter((function(e){return e._id!==m._id}))})),s(null),x.b.success("Success"),T(!1),a(!1)};return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(j.a,{open:l,onClose:function(){return a(!1)},fullWidth:!0,children:[Object(g.jsx)(b.a,{id:"form-dialog-title",children:"Details Event"}),Object(g.jsx)(O.a,{children:m&&Object(g.jsx)(P,{event:m})}),Object(g.jsxs)(p.a,{children:[Object(g.jsx)(v.a,{onClick:function(){return a(!1)},color:"primary",children:"Close"}),(null===d||void 0===d?void 0:d.id)===(null===m||void 0===m||null===(e=m.creator)||void 0===e?void 0:e._id)?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(v.a,{color:"primary",onClick:function(){return c(!0)},children:"Edit"}),Object(g.jsx)(v.a,{color:"primary",onClick:function(){return T(!0)},children:"Delete"})]}):null]})]}),Object(g.jsxs)(j.a,{open:k,onClose:function(){return T(!1)},fullWidth:!0,children:[Object(g.jsx)(b.a,{children:"Are you sure?"}),Object(g.jsxs)(p.a,{children:[Object(g.jsx)(v.a,{color:"primary",onClick:w,children:"Delete"}),Object(g.jsx)(v.a,{color:"primary",onClick:function(){return T(!1)},children:"Cancel"})]})]})]})},B=function(){var e=Object(r.useContext)(D),t=e.setEvents,n=e.editOpen,c=e.setEditOpen,i=e.setDetailsOpen,s=e.selectedEvent,l=e.setSelectedEvent,a=e.usersList,h=e.groups,f=(Object(r.useContext)(u.a).url,Object(r.useState)(!1)),m=Object(o.a)(f,2),C=m[0],T=m[1],_=Object(d.b)({defaultValues:V}),q=_.handleSubmit,M=_.errors,G=_.register,W=_.control,P=_.setValue;Object(r.useEffect)((function(){s&&R(s)}),[s,n]);var R=function(){var e=Object(L.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(E.c)("/event/get/".concat(t),"GET",F));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(L.a)(I.a.mark((function e(t){var n,r,c,i,l,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.title,r=t.description,c=t.start,i=t.end,l=t.groupId,a=t.users,T(!0),Object(E.c)("/event/edit","POST",N,{id:s,title:n,description:r,start:new Date(c).toISOString(),end:i?new Date(i).toISOString():null,group:l||null,users:a?a.map((function(e){return e._id})):[]}),T(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(e){var t=e.title,n=e.description,r=e.start,c=e.end,i=e.users,s=e.group;P("title",t,{shouldDirty:!0,shouldValidate:!0}),P("description",n),P("start",Object(w.a)(new Date(r),"yyyy-MM-dd'T'k:mm")),P("end",c?Object(w.a)(new Date(c),"yyyy-MM-dd'T'k:mm"):""),P("users",i||[]),P("groupId",s?s._id:"")},N=function(e){t((function(t){return t.map((function(t){return t._id===e._id&&(t=e),t}))})),l(null),c(!1),i(!1),x.b.success("Success")};return Object(g.jsxs)(j.a,{open:n,onClose:function(){c(!1),l(null)},fullWidth:!0,children:[Object(g.jsx)(b.a,{id:"form-dialog-title",children:"Edit Event"}),Object(g.jsx)(O.a,{children:Object(g.jsxs)("form",{onSubmit:q(B),children:[Object(g.jsx)(k,{name:"title",control:W,type:"text",label:"Title",errors:M,rules:{required:"Required",minLength:{value:5,message:"Min length is 5"}}}),Object(g.jsx)(k,{name:"description",control:W,type:"text",label:"Description",errors:M,rules:{required:!1}}),Object(g.jsx)(k,{name:"start",control:W,type:"datetime-local",label:"*Begin date",errors:M,rules:{required:"Required"}}),Object(g.jsx)(k,{name:"end",control:W,type:"datetime-local",label:"End date",errors:M,rules:{required:!1},inputLabelProps:{shrink:!0}}),Object(g.jsx)(S,{list:h,optionTitle:"name",label:"select group",errors:M,rules:{required:!1},name:"groupId",optionValue:"_id",control:W,setValue:P}),Object(g.jsx)(y,{list:a,optionTitle:"username",label:"select users",placeholder:"select users",errors:M,name:"users",validatorRef:G({required:!1}),control:W,setValue:P}),Object(g.jsxs)(p.a,{children:[Object(g.jsx)(v.a,{onClick:function(){c(!1),l(null)},color:"primary",children:"Close"}),Object(g.jsxs)(v.a,{type:"submit",color:"primary",children:["Edit ",C?"...":null]})]})]})})]})},F=(n(317),function(){var e=Object(r.useContext)(D),t=e.events,n=e.setCreateOpen,a=e.setSelectedEvent,o=e.setDetailsOpen,u=Object(c.useMediaQuery)({minWidth:800}),d={custom:{text:"Add event",click:function(){return n(!0)}}};return Object(g.jsxs)(i.a,{children:[Object(g.jsx)("div",{id:"calendar",children:Object(g.jsx)(s.a,{plugins:[l.a],displayEventEnd:!0,displayEventTime:!0,eventClick:function(e){a(e.event.extendedProps._id),o(!0)},eventTimeFormat:{hour:"2-digit",minute:"2-digit",hour12:!1},eventDisplay:"block",initialView:u?"dayGridMonth":"dayGridDay",height:"90vh",customButtons:d,headerToolbar:{center:"custom",right:"prev,next,today,dayGridDay,dayGridWeek,dayGridMonth"},events:t})}),Object(g.jsx)(q,{}),Object(g.jsx)(R,{}),Object(g.jsx)(B,{})]})});t.default=function(){return Object(g.jsx)(_,{children:Object(g.jsx)(F,{})})}}}]);
//# sourceMappingURL=10.6df09aa7.chunk.js.map