{"version":3,"sources":["context/AuthContext.jsx","components/Login.jsx","components/Logout.jsx","components/Spinner.jsx","components/PrivateRoute.jsx","hooks/useAuth.jsx","components/IncommingCall.jsx","App.jsx","style/theme.js","serviceWorkerRegistration.js","reportWebVitals.js","index.js","config.js","helpers/downloadBlob.js","helpers/apiCall.js","context/VideoCallContext.jsx"],"names":["AuthContext","createContext","AuthContextProvider","children","useState","theme","setThemeValue","user","setUser","socket","io","useEffect","initialTheme","localStorage","getItem","Provider","value","setTheme","setItem","url","Login","useForm","mode","shouldUnregister","handleSubmit","errors","control","email","setEmail","password","setPassword","loading","setLoading","message","setMessage","history","useHistory","useContext","onSubmit","a","authCall","res","status","data","username","role","Cookies","JSON","stringify","expires","token","push","response","error","className","Typography","variant","component","icon","faLock","as","TextField","name","label","type","autoComplete","defaultValue","onChange","e","target","helperText","rules","required","pattern","Alert","severity","color","Button","Logout","faHamburger","Spinner","CircularProgress","PrivateRoute","Component","rest","checkToken","console","setTimeout","cookieUser","initialUser","parse","log","useAuth","render","props","IncommingCall","VideoCallContext","incommingCall","setIncommingCall","Dialog","open","onClose","fullWidth","DialogTitle","id","DialogActions","href","_id","onClick","Home","lazy","Calendar","Files","Account","Groups","VideoCall","App","currentTheme","createMuiTheme","palette","overrides","MuiList","root","listStyle","ThemeProvider","CssBaseline","fallback","exact","path","position","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","document","getElementById","URL","process","origin","addEventListener","fetch","headers","contentType","get","indexOf","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration","apiUrl","chatSocektUrl","videoSocketUlr","downloadBlob","blob","Blob","msSaveBlob","blobObject","link","createElement","createObjectURL","download","body","appendChild","click","callApi","method","callBack","axios","Authorization","withCredentials","toast","statusText","swrCall","apiDownload","responseType","VideoCallContextProvider","isConnectionSet","setIsConnectionSet","useRef","current","connect","on","group","emit"],"mappings":"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","file":"static/js/main.2b2e58e7.chunk.js","sourcesContent":["import React, { createContext, useState, useEffect } from \"react\";\r\nimport io from \"socket.io-client\";\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport const AuthContextProvider = ({ children }) => {\r\n  const ENDPOINT = \"http://localhost:4001\";\r\n\r\n  const [theme, setThemeValue] = useState(\"light\");\r\n  const [user, setUser] = useState(null);\r\n  const socket = io(ENDPOINT);\r\n  const setTheme = (value) => {\r\n    localStorage.setItem(\"theme\", value);\r\n    setThemeValue(value);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const initialTheme = localStorage.getItem(\"theme\");\r\n    if (initialTheme) {\r\n      setThemeValue(initialTheme);\r\n    }\r\n  }, [,]);\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        theme,\r\n        setTheme,\r\n        user,\r\n        setUser,\r\n        socket,\r\n        url: \"http://localhost:4000\",\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n","import React, { useState, useContext } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { Button, Typography } from \"@material-ui/core\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport * as Cookies from \"js-cookie\";\r\nimport { authCall } from \"../helpers/apiCall\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\nimport { useForm, Controller } from \"react-hook-form\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faLock } from \"@fortawesome/free-solid-svg-icons\";\r\nimport \"../style/login.css\";\r\n\r\nexport const Login = () => {\r\n  const { handleSubmit, errors, control } = useForm({\r\n    mode: \"all\",\r\n    shouldUnregister: false,\r\n  });\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState(null);\r\n  const history = useHistory();\r\n  const { url, setUser } = useContext(AuthContext);\r\n\r\n  const onSubmit = async ({ email, password }) => {\r\n    setLoading(true);\r\n    if (!email || !password) {\r\n      return setMessage(\"Incorrect email or password\");\r\n    }\r\n    try {\r\n      const res = await authCall(`/login`, \"POST\", { email, password });\r\n\r\n      const { status, data } = res;\r\n      if (status === 200 && data.username && data.role) {\r\n        setUser(data);\r\n        Cookies.set(\"user\", JSON.stringify(data), { expires: 14 });\r\n        Cookies.set(\"token\", data.token, { expires: 14 });\r\n        history.push(\"/\");\r\n      }\r\n    } catch (err) {\r\n      err?.response?.data?.error\r\n        ? setMessage(err?.response?.data?.error)\r\n        : setMessage(err.message);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <Typography className=\"icon\" variant=\"h2\" component=\"span\">\r\n        <FontAwesomeIcon icon={faLock} />\r\n      </Typography>\r\n      <Typography className=\"title\" variant=\"h3\" component=\"h1\">\r\n        Sign In\r\n      </Typography>\r\n      <form onSubmit={handleSubmit(onSubmit)}>\r\n        <Controller\r\n          as={TextField}\r\n          className=\"email\"\r\n          name=\"email\"\r\n          label=\"email\"\r\n          type=\"email\"\r\n          variant=\"outlined\"\r\n          autoComplete=\"email\"\r\n          defaultValue={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          control={control}\r\n          error={!!errors.email}\r\n          helperText={errors.email?.message}\r\n          rules={{\r\n            required: \"Required\",\r\n            pattern: {\r\n              value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i,\r\n              message: \"invalid email address\",\r\n            },\r\n          }}\r\n        />\r\n\r\n        <Controller\r\n          as={TextField}\r\n          className=\"password\"\r\n          name=\"password\"\r\n          label=\"password\"\r\n          type=\"password\"\r\n          variant=\"outlined\"\r\n          autoComplete=\"current-password\"\r\n          defaultValue={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          control={control}\r\n          error={!!errors.password}\r\n          helperText={errors.password?.message}\r\n          rules={{\r\n            required: \"Required\",\r\n          }}\r\n        />\r\n\r\n        {message ? (\r\n          <Alert className=\"alert\" severity=\"success\" color=\"error\">\r\n            {message}\r\n          </Alert>\r\n        ) : null}\r\n\r\n        <Button variant=\"contained\" color=\"primary\" type=\"submit\" value=\"login\">\r\n          Login {loading ? \"...\" : null}\r\n        </Button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect, useContext } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faHamburger } from \"@fortawesome/free-solid-svg-icons\";\r\nimport * as Cookies from \"js-cookie\";\r\nimport { authCall } from \"../helpers/apiCall\";\r\nimport \"../style/logout.css\";\r\n\r\nexport const Logout = () => {\r\n  const history = useHistory();\r\n  const { url, setUser } = useContext(AuthContext);\r\n\r\n  const logout = () => {\r\n    authCall(`/logout`, \"GET\");\r\n    setUser(null);\r\n    Cookies.remove(\"user\");\r\n    history.push(\"/login\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    logout();\r\n  }, [,]);\r\n\r\n  return (\r\n    <div className=\"logout\">\r\n      <FontAwesomeIcon icon={faHamburger} />\r\n    </div>\r\n  );\r\n};\r\n","import CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport \"../style/spinner.css\";\r\nexport const Spinner = () => (\r\n  <div className=\"spinner-container\">\r\n    <CircularProgress></CircularProgress>\r\n  </div>\r\n);\r\n","import React, { useContext } from \"react\";\r\nimport { Route } from \"react-router-dom\";\r\nimport { AuthContext } from \"context/AuthContext\";\r\nimport { useAuth } from \"hooks/useAuth\";\r\nimport { Spinner } from \"components/Spinner\";\r\n\r\nexport const PrivateRoute = ({ component: Component, ...rest }) => {\r\n  const { user } = useContext(AuthContext);\r\n  useAuth();\r\n\r\n  if (user) {\r\n    return <Route {...rest} render={(props) => <Component {...props} />} />;\r\n  }\r\n  return <Spinner></Spinner>;\r\n};\r\n","import { useEffect, useContext } from \"react\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport * as Cookies from \"js-cookie\";\r\nimport { authCall } from \"../helpers/apiCall\";\r\n\r\nexport const useAuth = () => {\r\n  const history = useHistory();\r\n  const { user, setUser } = useContext(AuthContext);\r\n\r\n  const checkToken = async () => {\r\n    try {\r\n      const res = await authCall(`/checkRole`, \"GET\");\r\n      const { status, data } = res;\r\n      if (status === 200 && data.username && data.role) {\r\n        setUser(data);\r\n        Cookies.set(\"user\", JSON.stringify(data), { expires: 14 });\r\n        Cookies.set(\"token\", data.token, { expires: 14 });\r\n      } else {\r\n        setUser(null);\r\n        history.push(\"/login\");\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      setUser(null);\r\n      history.push(\"/login\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      if (!user) {\r\n        const cookieUser = Cookies.get(\"user\");\r\n        if (cookieUser) {\r\n          const initialUser = JSON.parse(cookieUser);\r\n          console.log(initialUser);\r\n          initialUser ? setUser(initialUser) : checkToken();\r\n        } else {\r\n          checkToken();\r\n        }\r\n      }\r\n    }, 1000);\r\n  }, [,]);\r\n};\r\n","import React, { useContext } from \"react\";\r\nimport { Button, DialogTitle, DialogActions, Dialog } from \"@material-ui/core\";\r\nimport { VideoCallContext } from \"../context/VideoCallContext\";\r\nimport CallEndIcon from \"@material-ui/icons/CallEnd\";\r\nimport CallIcon from \"@material-ui/icons/Call\";\r\n\r\nexport const IncommingCall = () => {\r\n  const { incommingCall, setIncommingCall } = useContext(VideoCallContext);\r\n  return (\r\n    <Dialog\r\n      open={!!incommingCall}\r\n      onClose={() => setIncommingCall(null)}\r\n      fullWidth\r\n    >\r\n      <DialogTitle id=\"form-dialog-title\">\r\n        Incomming call from group {incommingCall?.name}\r\n      </DialogTitle>\r\n      <DialogActions>\r\n        <Button\r\n          target=\"_blank\"\r\n          href={`/VideoCall/${incommingCall?._id}`}\r\n          onClick={() =>\r\n            setTimeout(() => {\r\n              setIncommingCall(null);\r\n            }, 1000)\r\n          }\r\n          color=\"primary\"\r\n        >\r\n          <CallIcon />\r\n        </Button>\r\n        <Button color=\"primary\" onClick={() => setIncommingCall(null)}>\r\n          <CallEndIcon />\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n","import React, { useContext, Suspense, lazy } from \"react\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport { ToastContainer } from \"react-toastify\";\nimport { ThemeProvider } from \"@material-ui/core/styles\";\nimport { Switch, Route } from \"react-router-dom\";\nimport { createTheme } from \"./style/theme\";\nimport { Login } from \"./components/Login\";\nimport { Logout } from \"./components/Logout\";\nimport { AuthContext } from \"./context/AuthContext\";\nimport { PrivateRoute } from \"./components/PrivateRoute\";\nimport { IncommingCall } from \"./components/IncommingCall\";\nimport { Spinner } from \"components/Spinner\";\nimport \"style/App.css\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nconst Home = lazy(() => import(\"./components/Home\"));\nconst Calendar = lazy(() => import(\"./components/calendar\"));\nconst Files = lazy(() => import(\"./components/files\"));\nconst Account = lazy(() => import(\"./components/account/Account\"));\nconst Groups = lazy(() => import(\"./components/groups\"));\nconst VideoCall = lazy(() => import(\"./components/groups/videoCall/VideoCall\"));\n\nexport const App = () => {\n  const context = useContext(AuthContext);\n  const { theme } = context;\n  const currentTheme = createTheme(theme);\n  return (\n    <ThemeProvider theme={currentTheme}>\n      <CssBaseline />\n      <div className=\"App\">\n        <IncommingCall />\n        <Suspense fallback={<Spinner />}>\n          <Switch>\n            <PrivateRoute exact path=\"/\" component={Home} />\n            <PrivateRoute path=\"/groups\" component={Groups} />\n            <PrivateRoute path=\"/videoCall/:id\" component={VideoCall} />\n            <PrivateRoute path=\"/calendar\" component={Calendar} />\n            <PrivateRoute path=\"/files\" component={Files} />\n            <PrivateRoute path=\"/account\" component={Account} />\n            <Route path=\"/logout\" component={Logout} />\n            <Route path=\"/login\" component={Login} />\n          </Switch>\n        </Suspense>\n        <ToastContainer\n          position=\"bottom-right\"\n          autoClose={7000}\n          hideProgressBar={false}\n          newestOnTop={false}\n          closeOnClick\n          rtl={false}\n          pauseOnFocusLoss\n          draggable\n          pauseOnHover\n        />\n      </div>\n    </ThemeProvider>\n  );\n};\n","import { createMuiTheme } from \"@material-ui/core/styles\";\r\nimport {\r\n  blue,\r\n  green,\r\n  indigo,\r\n  pink,\r\n  yellow,\r\n  orange,\r\n} from \"@material-ui/core/colors\";\r\n\r\nexport const createTheme = (type) =>\r\n  createMuiTheme({\r\n    palette: {\r\n      type,\r\n      // primary: type === \"light\" ? indigo : pink,\r\n    },\r\n    overrides: {\r\n      MuiList: {\r\n        root: {\r\n          listStyle: \"none\",\r\n        },\r\n      },\r\n    },\r\n  });\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"style/index.css\";\nimport { App } from \"./App\";\nimport * as serviceWorkerRegistration from \"./serviceWorkerRegistration\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { AuthContextProvider } from \"./context/AuthContext\";\nimport { VideoCallContextProvider } from \"./context/VideoCallContext\";\nimport { HashRouter as Router, BrowserHistory } from \"react-router-dom\";\n\nReactDOM.render(\n  // <React.StrictMode>\n  <AuthContextProvider>\n    <VideoCallContextProvider>\n      <Router>\n        <App />\n      </Router>\n    </VideoCallContextProvider>\n  </AuthContextProvider>,\n  // </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","export const config = {\r\n  apiUrl: \"https://vps.franciszekpawlak.pl:17200\",\r\n  chatSocektUrl: \"https://vps.franciszekpawlak.pl:17300\",\r\n  videoSocketUlr: \"https://vps.franciszekpawlak.pl:17400\",\r\n};\r\n","export const downloadBlob = (data) => {\r\n  var blob = new Blob([data], { type: data.type });\r\n  if (typeof window.navigator.msSaveBlob === \"function\") {\r\n    // If it is IE that support download blob directly.\r\n    window.navigator.msSaveBlob(data, \"file\");\r\n  } else {\r\n    var blobObject = blob;\r\n    var link = document.createElement(\"a\");\r\n    link.href = window.URL.createObjectURL(blobObject);\r\n    link.download = \"file\";\r\n\r\n    document.body.appendChild(link);\r\n\r\n    link.click();\r\n  }\r\n};\r\n","import axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\nimport { downloadBlob } from \"helpers/downloadBlob\";\r\nimport { config } from \"config\";\r\nimport * as Cookies from \"js-cookie\";\r\n\r\nexport const callApi = async (\r\n  url,\r\n  method,\r\n  callBack,\r\n  body,\r\n  headers = {\r\n    \"Content-Type\": \"application/json\",\r\n  }\r\n) => {\r\n  const token = Cookies.get(\"token\");\r\n  try {\r\n    const res = await axios({\r\n      method: method,\r\n      url: `${config.apiUrl}${url}`,\r\n      headers: { ...headers, Authorization: token },\r\n      data: body,\r\n      withCredentials: true,\r\n    });\r\n    if (res.data) {\r\n      callBack(res.data);\r\n    } else {\r\n      toast.error(\"Invalid data\");\r\n    }\r\n  } catch (err) {\r\n    console.error(err);\r\n    toast.error(err?.response?.statusText);\r\n  }\r\n};\r\n\r\nexport const authCall = async (url, method = \"GET\", body = null) => {\r\n  const token = Cookies.get(\"token\");\r\n\r\n  const res = await axios({\r\n    method: method,\r\n    url: `${config.apiUrl}${url}`,\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: token,\r\n    },\r\n    data: body,\r\n    withCredentials: true,\r\n  });\r\n  return res;\r\n};\r\n\r\nexport const swrCall = async (url) => {\r\n  const token = Cookies.get(\"token\");\r\n\r\n  const res = await axios({\r\n    url: `${config.apiUrl}${url}`,\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: token,\r\n    },\r\n    withCredentials: true,\r\n  });\r\n  return res.data;\r\n};\r\n\r\nexport const apiDownload = async (url, data) => {\r\n  const token = Cookies.get(\"token\");\r\n\r\n  try {\r\n    const res = await axios({\r\n      url: `${config.apiUrl}${url}`,\r\n      method: \"POST\",\r\n      data: data,\r\n      withCredentials: true,\r\n      responseType: \"blob\",\r\n      headers: {\r\n        Authorization: token,\r\n      },\r\n    });\r\n    downloadBlob(res.data);\r\n  } catch (err) {\r\n    toast.error(err?.response?.statusText);\r\n  }\r\n};\r\n","import React, {\r\n  createContext,\r\n  useState,\r\n  useEffect,\r\n  useRef,\r\n  useContext,\r\n} from \"react\";\r\nimport { AuthContext } from \"./AuthContext\";\r\nimport io from \"socket.io-client\";\r\nimport { config } from \"config\";\r\n\r\nexport const VideoCallContext = createContext();\r\n\r\nexport const VideoCallContextProvider = ({ children }) => {\r\n  const { user } = useContext(AuthContext);\r\n  const [isConnectionSet, setIsConnectionSet] = useState(false);\r\n  const [incommingCall, setIncommingCall] = useState(null);\r\n\r\n  const socket = useRef();\r\n\r\n  useEffect(() => {\r\n    socket.current = io.connect(config.videoSocketUlr, {\r\n      path: \"/socket.io/webrtc\",\r\n      // transports: [\"websocket\"],\r\n    });\r\n    socket.current.on(\"incomming call\", (group) => {\r\n      setIncommingCall(group);\r\n    });\r\n\r\n    return () => socket.current.emit(\"disconnect\");\r\n  }, [,]);\r\n\r\n  useEffect(() => {\r\n    if (user && !isConnectionSet) {\r\n      socket.current.emit(\"login\", user);\r\n      setIsConnectionSet(true);\r\n    }\r\n  }, [user]);\r\n\r\n  return (\r\n    <VideoCallContext.Provider\r\n      value={{\r\n        socket,\r\n        incommingCall,\r\n        setIncommingCall,\r\n      }}\r\n    >\r\n      {children}\r\n    </VideoCallContext.Provider>\r\n  );\r\n};\r\n"],"sourceRoot":""}